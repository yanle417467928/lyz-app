<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.leyizhuang.app.foundation.dao.ArrearsAuditDAO">

    <select id="findByUserId" resultType="cn.com.leyizhuang.app.foundation.pojo.response.ArrearsAuditResponse">
        SELECT id, ord_no orderNumber, customer_name customerName, customer_phone customerPhone,
        seller_name sellerName, seller_phone sellerPhone, distribution_address distributionAddress,
        distribution_time distributionTime, agency_money agencyMoney, real_money realMoney,
        payment_method paymentMethod, status, order_money
        FROM ord_arrears_audit
        WHERE user_id = #{userId}
        AND status IN
        <foreach collection="list" item="status" open="(" close=")" separator=",">
            #{status}
        </foreach>
        ORDER BY create_time desc
    </select>

    <select id="findByUserIdAndOrderNo" resultType="cn.com.leyizhuang.app.foundation.pojo.response.ArrearsAuditResponse">
        SELECT id, ord_no orderNumber, customer_name customerName, customer_phone customerPhone,
        seller_name sellerName, seller_phone sellerPhone, distribution_address distributionAddress,
        distribution_time distributionTime, agency_money agencyMoney, real_money realMoney,
        payment_method paymentMethod, status, order_money orderMoney
        FROM ord_arrears_audit
        WHERE user_id = #{userId}
        AND ord_no = #{orderNo}
        AND status IN
        <foreach collection="list" item="status" open="(" close=")" separator=",">
            #{status}
        </foreach>
        ORDER BY create_time desc
    </select>

    <insert id="save" parameterType="cn.com.leyizhuang.app.foundation.pojo.order.OrderArrearsAuditDO">
        INSERT INTO ord_arrears_audit
        (user_id,customer_name,customer_phone,seller_name,seller_phone,ord_no,agency_money,order_money,
        real_money,cash_money,pos_money,alipay_money,wechat_money,payment_method,distribution_address,
        distribution_time,remarks,status,create_time,seller_id)
        VALUES
        (#{userId},#{customerName},#{customerPhone},#{sellerName},#{sellerphone},#{orderNumber},#{agencyMoney},#{orderMoney},
        #{realMoney},#{cashMoney},#{posMoney},#{alipayMoney},#{wechatMoney},#{paymentMethod},#{distributionAddress},
        #{distributionTime},#{remarks},#{status},#{createTime},#{sellerId})
    </insert>

</mapper>